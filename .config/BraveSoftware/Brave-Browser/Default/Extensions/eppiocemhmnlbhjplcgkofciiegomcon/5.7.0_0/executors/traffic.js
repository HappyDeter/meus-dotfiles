(()=>{function x(x,$,v,C,D=null){try{let V=document.location.host,p="detector",K={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"VIDEO_XHR_CANDIDATE",from:p,to:p.substring(0,p.length-2),content:{requestMethod:x,url:$,type:v,content:C}};V.includes("youtube.com")&&D&&D[0]&&D[0].length&&(K.content.encodedPostBody=D[0]),window.postMessage(K,"*")}catch(x){}}let $=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],$.apply(this,arguments)};let v=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){const $=Object.assign(arguments,{});let C=this.onreadystatechange;return this.onreadystatechange=function(){if(4!==this.readyState||function(x){const $=document.querySelector("script[data-bis-config]")?JSON.parse(document.querySelector("script[data-bis-config]").getAttribute("data-bis-config")):null;return!!$&&$.some(($=>x.includes($)))}(this.responseURL)||x(this.requestMethod,this.responseURL,this.getResponseHeader("content-type"),this.response,$),C)return C.apply(this,arguments)},v.apply(this,arguments)};let C=fetch;fetch=function(){const $=arguments;let v=arguments[0]instanceof Request?arguments[0].url:arguments[0];const D=arguments[0]instanceof Request?arguments[0].method:"GET";return"object"==typeof v&&v.href&&(v=v.href),new Promise(((V,p)=>{C.apply(this,$).then((function($){if($.body instanceof ReadableStream){const C=$.json;$.json=function(){return new Promise(((V,p)=>{C.apply(this,arguments).then((function(C){0!==$.url.search(/data:application\/json;base64/)&&x(D,v,$.headers.get("content-type"),JSON.stringify(C)),V(C)})).catch((function(x){p(x)}))}))};const V=$.text;$.text=function(){return new Promise(((C,p)=>{V.apply(this,arguments).then((function(V){0!==$.url.search(/data:application\/json;base64/)&&x(D,v,$.headers.get("content-type"),V),C(V)})).catch((function(x){p(x)}))}))}}V.apply(this,arguments)})).catch((function(x){p.apply(this,arguments)}))}))}})();