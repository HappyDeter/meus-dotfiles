(()=>{const x=null!==($=sessionStorage.getItem("bis_data"))?JSON.parse($):null;var $;const v=document.querySelector("script[bis_id]");window.bisData={id:v?v.getAttribute("bis_id")+"_w":null,html5TargetUrlDetectionConfig:x?x.config.html5TargetUrlDetectionConfig:null};const C=window.bisData.html5TargetUrlDetectionConfig,D=window.bisData.id;function V(){return(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22)}function p(x,$,v,C){if(!window.bisData)return;let D=window.bisData.html5TargetUrlDetectionConfig.TARGET_URL_CLICK_ELEMENTS_SELECTOR;var p=document.querySelectorAll(D);if(p.length){window.bisData.origWindowOpen=window.open,window.bisData.elementSquare=0,window.bisData.clickTargetUrl=[],window.bisData.clickTargetUrlProcessed=!1;var K=function(D){if(window.bisData.clickTargetUrl.some((x=>x.href===D)))return null;if(window.bisData.clickTargetUrl.push({href:D,square:window.bisData.elementSquare}),window.bisData&&window.bisData.clickTargetUrl&&window.bisData.clickTargetUrl.length){let D="GET_WINDOW_TARGET_URL"===C.type?{targetUrlList:window.bisData.clickTargetUrl}:{chainId:C.content.chainId,clickTargetUrl:window.bisData.clickTargetUrl},p={posdMessageId:"PANELOS_MESSAGE",posdHash:V(),type:`${C.type}_RESPOND`,from:x,to:x.substring(0,x.length-2),content:D};document.body&&document.body.setAttribute&&document.body.setAttribute("bis_mes_to_fr",JSON.stringify(p)),$.postMessage&&$.postMessage(p,v)}return null};window.open=K;for(var Z=0;Z<p.length&&0===window.bisData.clickTargetUrl.length;Z++)try{if(p[Z]&&p[Z].click&&p[Z].getBoundingClientRect){let x=p[Z].getBoundingClientRect();x.width>40&&x.height>40&&(window.bisData.elementSquare=x.width*x.height,window.open==K&&p[Z].click())}}catch(x){}setTimeout((()=>{window.open=window.bisData.origWindowOpen}),1e3),window.bisData.clickTargetUrlProcessed=!0}}window.addEventListener("message",(function(x){try{var $=D,v=x.data;let Z=x.source,O=x.origin;if(void 0!==(K=v)&&void 0!==K.posdMessageId&&void 0!==K.from&&void 0!==K.to&&void 0!==K.type&&void 0!==K.content&&"PANELOS_MESSAGE"===K.posdMessageId&&v.to===$)if("GET_WINDOW_TARGET_URL"===v.type){let D=function(x,$,v){let C=G($,[D,V,p,K,Z,O],v);C&&C.length;return C;function D(x){if(void 0!==x.clickTag&&U(x.clickTag))return{href:x.clickTag,square:1000001}}function V(x){if(void 0!==x.adData){if(void 0!==x.adData.destination_url&&U(x.adData.destination_url))return{href:x.adData.destination_url,square:1000001};if(void 0!==x.adData.redirect_url&&U(x.adData.redirect_url))return{href:x.adData.redirect_url,square:1000001}}}function p(x){if(void 0!==x.BF&&void 0!==x.BF.Parameters&&void 0!==x.BF.Parameters.targeturl&&U(x.BF.Parameters.targeturl))return{href:x.BF.Parameters.targeturl,square:1000001}}function K(x){if(void 0!==x.ADAPT&&void 0!==x.ADAPT.symbols&&void 0!==x.ADAPT.symbols.stage&&void 0!==x.ADAPT.symbols.stage.clickUrl&&U(x.ADAPT.symbols.stage.clickUrl))return{href:x.ADAPT.symbols.stage.clickUrl,square:1000001}}function Z(x){if(void 0!==x.admixAPI&&void 0!==x.admixAPI.ownerBanner&&void 0!==x.admixAPI.ownerBanner.clickUrl&&U(x.admixAPI.ownerBanner.clickUrl))return{href:x.admixAPI.ownerBanner.clickUrl,square:1000001}}function O($,v){let C=w(x,$,v);if(U(C))return{href:C,square:999999}}function U(x){return"string"==typeof x&&x.length>0&&(-1!==x.indexOf("http")||-1!==x.indexOf("//"))}function G(x,$,v){let C=[];for(let D of $)try{let $=D(x,v);$&&$.href&&C.push($)}catch(x){}return C}function w(x,$,v){let C=u($,v);return C&&0!==C.length?M($,C,v):null}function M(x,$,v,C=[]){let D=v.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(C.length>D)return null;for(let D of $)try{let $=x[D];if(!$)return null;let V=C.concat(D);if("object"==typeof $){let x=M($,Object.getOwnPropertyNames($),v,V);if(x)return x}else if("string"==typeof $&&_(D,v)&&U($))return $}catch(x){}return null}function _(x,$){let v=e(x),C=$.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS;for(let x of C){if(v===x)return!0}return!1}function e(x){return x.toLowerCase().replace(/[^a-zA-Z]+/g,"")}function u(x,$){let v=Object.getOwnPropertyNames(x);const C=$.WINDOW_PROPERTY_NAMES;return v.filter((x=>C.indexOf(x)<0))}}($,window,C);if(D.length){let v={posdMessageId:"PANELOS_MESSAGE",posdHash:V(),type:"GET_WINDOW_TARGET_URL_RESPOND",from:$,to:$.substring(0,$.length-2),content:{targetUrlList:D}};document.body&&document.body.setAttribute&&document.body.setAttribute("bis_mes_to_fr",JSON.stringify(v)),x.source.postMessage&&x.source.postMessage(v,x.origin)}else{if(window.bisData.clickTargetUrlProcessed)return;p($,Z,O,v)}}else if("GET_WINDOW_CLICK_TARGET_URL"===v.type){if(window.bisData.clickTargetUrlProcessed)return;p($,Z,O,v)}}catch(x){}var K}),!1)})();