(()=>{const x=null!==($=sessionStorage.getItem("bis_data"))?JSON.parse($):null;var $;const v=x?x.config.redditConfig:null,C=x?x.id+"_w":null;if(null!==v){function D(x){const $=function(x){const $=function(x){const $=new RegExp(v.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX);let C=x.match($),D=null;C&&C.length&&(D=C[1]);return D}(x);return{videoId:$,url:x}}(x);!function(x){try{x.detectionTime=Date.now()/1e3|0;let $={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"REDDIT_VIDEO_DATA",from:C,to:C.substring(0,C.length-2),content:x};window.postMessage($)}catch(x){}}($)}function V(x){try{const $=JSON.parse(x.content);let v=[];for(let x of $){const $={};x.source&&x.source.hasOwnProperty("outboundUrl")&&($.elementId=x.id,$.targetUrl=x.source.outboundUrl,v.push($))}!function(x){try{let $={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"REDDIT_RIGHT_COLUMN_DATA",from:C,to:C.substring(0,C.length-2),content:x};window.postMessage($)}catch(x){}}(v)}catch(x){}}let p=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],this.url=arguments[1],p.apply(this,arguments)};let K=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){var x=this;let $=(C=x.url,new RegExp(v.VIDEO_TRAFFIC_DETECTOR.VIDEO_MPD_URL_CHECK).test(C));var C;let p,Z=function(x){return new RegExp(v.RIGHT_COLUMN.PATH_WITH_AD_URL).test(x)}(x.url);if(!$&&!Z)return K.apply(this,arguments);const O=function(){if(Z&&4===x.readyState){V({url:x.url,content:""===x.responseType||"text"===x.responseType?x.responseText:""})}else Z&&4!==x.readyState?p=setTimeout((()=>O.apply(this,arguments)),0):p&&clearTimeout(p)};return O(),D(x.url),K.apply(this,arguments)}}})();