(()=>{const x=!!document?.querySelector("script[adblock_use][bis_use]"),$=(()=>{const x=sessionStorage.getItem("bis_data");if(null!==x){return JSON.parse(x)}return null})(),v=$?.config?`${$.id}_t`:null,C=$?.config?.tiktokConfig?.TRAFFIC_LISTENER_CONFIG||{},{PARSERS:D=[]}=C;ParserProcessors={XMLHttpRequest:function($){const v=fetch;fetch=async function(C){let D=C instanceof Request?C.url:C;if("object"==typeof D&&D.href&&(D=D.href),!(x=>{let $=x.replace(/.*\/([gimy]*)$/,"$1"),v=x.replace(new RegExp("^/(.*?)/"+$+"$"),"$1");return new RegExp(v,$)})($.QUERY).test(D))return v.apply(this,arguments);try{const C=await v.apply(this,arguments);if(C.body instanceof ReadableStream){const v=C.clone(),D=await v.json(),K=D[$.CONTENT_QUERY],Z=V(K,$.PATHS_CHECK_AD);if(Z?.length&&(p(Z,$),x)){D[$.CONTENT_QUERY]=K.filter((x=>!x.isAd));const x=JSON.stringify(D);return new Response(x,{status:C.status,statusText:C.statusText,headers:C.headers})}}return C}catch(x){return v.apply(this,arguments)}}}};const V=(x,$)=>{const v=[];for(let C of x)$.some((x=>x.reduce(((x,$)=>x&&"object"==typeof x?x[$]:x),C)))&&v.push(C);return v},p=(x,$)=>{if(x?.length)for(let D of x){const x=K(D,C.PROPERTIES_FOR_AD_DATA,$.PATHS_GET_PROPERTIES);x&&Z(v,x)}},K=function(x,$,v){let C={};for(let D of $){const{NAME:$,PATH_NAME:V,IS_NECESSARY:p}=D,K=v[V];if(C[$]=K?.length?K.reduce(((x,$,v)=>{if(v===K.length-1&&"PATH_TO_PAGE_LINK"===V){return`https://www.tiktok.com/@${x[$]}`}return x&&"object"==typeof x?x?x[$]:null:x??null}),x):null,p&&!C[$])return null}return C},Z=(x,$)=>{try{let v={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"TIKTOK_VIDEO_CANDIDATES",from:x,to:x.substring(0,x.length-2),content:$};window.postMessage(v)}catch(x){}};for(let x of D)x.USE&&ParserProcessors[x.TYPE](x)})();