(()=>{function x(x,$,v,C,D=null){try{document.location.host;let V="detector",p=v;!p&&D&&(p=D[0]?.type?D[0].type:null);let K={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"VIDEO_XHR_CANDIDATE",from:V,to:V.substring(0,V.length-2),content:{requestMethod:x,url:$,type:p,content:C}};if(D&&D instanceof Promise)return void D.then((x=>{K.content.encodedPostBody=x,K.type="VIDEO_TWITCH_INSTREAM_DATA",window.postMessage(K,"*")}));C?.includes("streamPlaybackAccessToken")&&(K.type="VIDEO_TWITCH_INSTREAM_DATA"),window.postMessage(K,"*")}catch(x){}}let $=XMLHttpRequest.prototype.open,v=XMLHttpRequest.prototype.send,C=fetch;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],$.apply(this,arguments)},XMLHttpRequest.prototype.send=function(){const $=Object.assign(arguments,{});let C=this.onreadystatechange;return this.onreadystatechange=function(){if(4!==this.readyState||function(x){const $=document.querySelector("script[data-bis-config]")?JSON.parse(document.querySelector("script[data-bis-config]").getAttribute("data-bis-config")):null;return!!$&&$.some(($=>x.includes($)))}(this.responseURL)||x(this.requestMethod,this.responseURL,this.getResponseHeader("content-type"),this.response,$),C)return C.apply(this,arguments)},v.apply(this,arguments)},fetch=function(){const $=arguments;let v=arguments[0]instanceof Request?arguments[0].url:arguments[0];const D=arguments[0]instanceof Request?arguments[0].method:arguments[1]?.method?arguments[1].method:"GET",V="POST"===D?arguments[1].body:null;return"object"==typeof v&&v.href&&(v=v.href),new Promise(((p,K)=>{C.apply(this,$).then((function($){if($.body instanceof ReadableStream){const C=$.headers.get("content-type"),p=$.json;$.json=function(){return new Promise(((K,Z)=>{p.apply(this,arguments).then((function(p){0!==$.url.search(/data:application\/json;base64/)&&x(D,v,C,JSON.stringify(p),V),K(p)})).catch((function(x){Z(x)}))}))};const K=$.text;$.text=function(){return new Promise(((p,Z)=>{K.apply(this,arguments).then((function(K){0!==$.url.search(/data:application\/json;base64/)&&x(D,v,C,K,V),p(K)})).catch((function(x){Z(x)}))}))},new RegExp("video-edge.*.ts$").test(v)&&"POST"===D&&V?.arrayBuffer&&x(D,v,V.type,null,V.text())}p.apply(this,arguments)})).catch((function(x){K.apply(this,arguments)}))}))}})();