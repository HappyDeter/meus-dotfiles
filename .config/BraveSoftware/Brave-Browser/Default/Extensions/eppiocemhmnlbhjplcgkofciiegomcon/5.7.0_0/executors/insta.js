(()=>{const x=($=sessionStorage.getItem("bis_data"),v={adOpt:!!document.querySelector("script[ad-opt-on]"),config:null},null!==$&&(v.config=JSON.parse($)),v);var $,v;const C=x&&x.config?x.config.config.instagramConfig.TRAFFIC_LISTENER_CONFIG.PARSERS:[],D=x&&x.config?x.config.config.instagramConfig.TRAFFIC_LISTENER_CONFIG.PROPERTIES_FOR_VIDEO_DATA:[],V=x&&x.config?`${x.config.id}_i`:null;!(!x||!x.adOpt)&&x.adOpt;let p=0;const K=function(x,$){return function(){!function(x,$,v){try{let C={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:v,from:x,to:x.substring(0,x.length-2),content:$};window.postMessage(C)}catch(x){}}(V,x,$)}},Z=function(x,$){let v=null;for(let C of D){const D=C.NAME,V=C.PATH_NAME,p=C.IS_NECESSARY,K=C.DEFAULT_VALUE;if(v||(v={}),"detectionTime"!==D){if($[V]&&(v[D]=O(x,$[V],K),p&&!v[D]))return null}else v[D]=Date.now()/1e3|0}return v.headlineText?.length&&(v.fullText=v.headlineText+"\n"+v.fullText),delete v.headlineText,v},O=function(x,$,v){let C=x;for(let[x,D]of Object.entries($)){if("*"===D&&C.length){const v=$.slice(+x+1),D=v.length-1;return C.map((x=>{let $=x;for(let[x,C]of Object.entries(v))if($[C]&&($=$[C]),D===+x&&"string"==typeof $)return $}))}if(C[D])C=C[D];else if(!C[D]){C=v;break}}return C},U=function(x,$){if(!x||!x.length)return;let v=null;for(let C of x){let x="";try{if(w(C,$.PATH_CHECK_PROPERTIES))v=Z(C,$.PATHS_GET_PROPERTIES),x=v.videoSrc?"INSTAGRAM_VIDEO_DATA":"INSTAGRAM_CAROUSEL_SLIDES_SOURCES";else{if(!$.RULES_TO_GET_FULL_TEXT||!w(C,$.RULES_TO_GET_FULL_TEXT.PATH_CHECK_PROPERTIES))continue;v=Z(C,$.RULES_TO_GET_FULL_TEXT.PATHS_GET_PROPERTIES),x="INSTAGRAM_FULL_TEXT_DATA"}v&&setTimeout(K(v,x),0)}catch(x){}}},G=function(x,$){if(!x||!x.length)return;let v=[];for(let C of x){if(!w(C,$.PATH_CHECK_PROPERTIES))continue;let x=Z(C,$.PATHS_GET_PROPERTIES);x&&(null===x.videoVersions&&delete x.videoVersions,v.push(x))}v.length&&setTimeout(K(v,"INSTAGRAM_STORY_DATA"),0)},w=function(x,$){let v=!1;for(let C of $){let $=x,D=C.length-1;for(let[x,V]of Object.entries(C))if(V in $&&$[V]){if($=$[V],D===+x){v=!0;break}}else{if("*"===V&&$.length&&$.length>1&&!v&&D===+x){v=!0;break}v=!1}if(v)break}return v},M={XMLHttpRequest:function(x){let $=XMLHttpRequest.prototype.open,v=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=function(){const x=arguments[0].toLowerCase(),$=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[x]=$,v.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],$.apply(this,arguments)};let C=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){let $=this.onreadystatechange;return this.onreadystatechange=function(){const v=function(){const $=x.AD_TYPES_WAYS_TO_PROPERTIES;let v=x.QUERY;for(let x=0;x<$.length;x++){const C="QUERY_AD_TYPE_"+x,D=$[x];v=v.replace(C,D.QUERY_URL_PATH)}return new RegExp(v)}(),C=x.MATCH_HEADERS,D=this.requestHeaders?Object.keys(this.requestHeaders):null;let V=!1;if(D&&(V=D.some((x=>{if(C[x]&&C[x].includes(this.requestHeaders[x]))return!0}))),4===this.readyState&&v.test(this.responseURL))for(let K of x.AD_TYPES_WAYS_TO_PROPERTIES){const Z=this.responseURL.includes(K.QUERY_URL_PATH);if(V||Z){let O=this.response.length?JSON.parse(this.response):this.response;function p(x,$){let v=$;for(let[$,C]of Object.entries(x))v&&v[C]&&(v=v[C]),"*"===C&&v.length&&(v=v.map((v=>p(x.slice(+$+1),v))));return v}let w=p(K.PATH_TO_POSTS,O);"story"===K.AD_TYPE&&this.responseURL.includes(K.QUERY_URL_PATH)&&w.length?w.forEach((x=>{x&&G(x,K)})):"feed"===K.AD_TYPE&&U(w,K)}}if($)return $.apply(this,arguments)},C.apply(this,arguments)}},script:function(x){function $(){let $=Array.from(document.querySelectorAll("script"));const v=new RegExp(x.REGEXP_FILTER);let C=$.filter((x=>x.innerHTML.search(v)>-1));return C.length?C[0]:null}if(p++,"complete"!==document.readyState&&p<15){let $=null;return void($=setTimeout((()=>{$&&clearTimeout($),M.script(x)}),200))}let v=function(){let x=$();return x?JSON.parse(x.innerHTML):null}();let C=function x($,v){let C=v;for(let[v,D]of Object.entries($))C&&C[D]&&(C=C[D]),"*"===D&&C.length&&(C=C.map((C=>x($.slice(+v+1),C))));return C}(x.PATH_TO_POSTS,v);U(C,x)}};for(let x of C)x.USE&&M[x.TYPE](x)})();